<div class="product-table-container">
    <!-- admin center manage License filter and search bar -->

    <div class="top-bar">
        <div class="d-flex">
            <div class="toggle-container">
                <button class="toggle-button active">Apple</button>
                <button class="toggle-button">Android</button>
            </div>


            <div class="search-wrapper">
                <div class="search-box">
                    <input type="text" placeholder="Search" />
                    <img src="images/admin_search.png" class="notification_icon">
                </div>

                <button class="filter-btn mr-10">
                    <img src="images/admin_filter.png" class="notification_icon">
                </button>
            </div>
        </div>



        <table class="product-table">
            <thead>
                <tr>
                    <th *ngIf="!subProduct">ID</th>
                    <th *ngIf="!subProduct">Application Mode</th>
                    <th *ngIf="!subProduct">Bundle Identifier</th>
                    <th *ngIf="!subProduct">iPhone Cert Password</th>
                    <th *ngIf="!subProduct">iPad Cert Uploaded</th>
                    <th *ngIf="!subProduct">Status</th>
                    <th *ngIf="!subProduct">Actions</th>


                    <th *ngIf="subProduct">Sub-Product Name</th>
                    <th *ngIf="subProduct">Parent Product</th>
                    <th *ngIf="subProduct">Features</th>
                    <th *ngIf="subProduct">Channel</th>
                    <th *ngIf="subProduct">Screen</th>
                    <th *ngIf="subProduct">Status</th>
                    <th *ngIf="subProduct">Priority</th>
                    <th *ngIf="subProduct">Actions</th>
                </tr>
            </thead>
            <tbody>

                <tr *ngFor="let p of pagedProducts">
                    <td>{{ p.id }}</td>
                    <td>{{ p.applicationMode}}</td>
                    <td>{{ p.bundleIdentifier}}</td>
                    <td class="w-180">{{ p.iphoneCertPassword}}</td>
                    <td>
                        {{
                        p.isIpadCertUploaded?.toString().toLowerCase() === 'y' ||
                        p.isIpadCertUploaded?.toString().toLowerCase() === 'true'
                        ? 'Yes'
                        : 'No'
                        }}
                    </td>
                    <td>
                        <span class="status" [ngClass]="{
                          'active': p.status === 'ACT',
                          'inactive': p.status === 'IAC'
                        }">
                            {{ p.status === 'ACT' ? 'Active' : p.status === 'IAC' ? 'Inactive' : p.status }}
                        </span>
                    </td>
                    <td class="actions">
                        <!-- Use images -->
                        <ng-container>
                            <img src="images/eye.png" />
                            <img src="images/edit.png" (click)="openModal(p)" />
                            <img src="images/trash_red.png" (click)="openDeletePopup(p)" />
                        </ng-container>

                    </td>
                </tr>
            </tbody>
        </table>

        <!-- Pagination -->
        <div class="pagination">

            <!-- Previous -->
            <button (click)="setPage(currentPage - 1)" [disabled]="currentPage === 1">
                ‹
            </button>

            <!-- Page Numbers -->
            <ng-container *ngFor="let page of pages; let i = index">

                <!-- Ellipsis -->
                <span *ngIf="i > 0 && page - pages[i - 1] > 1">
                    ...
                </span>

                <!-- Page Button -->
                <button (click)="setPage(page)" [class.active-page]="page === currentPage">
                    {{ page }}
                </button>

            </ng-container>

            <!-- Next -->
            <button (click)="setPage(currentPage + 1)" [disabled]="currentPage === totalPages">
                ›
            </button>

        </div>

        <app-comon-popup [visible]="showDeleteConfirm" title="Delete Product"
            message="Are you sure you want to delete this Apple Device?" (confirm)="confirmDelete()"
            (cancel)="cancelDelete()">
        </app-comon-popup>

    </div>